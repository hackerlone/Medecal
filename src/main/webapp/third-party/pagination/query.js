!function(t,a){"function"==typeof define&&define.amd?define(["$"],a):"object"==typeof exports?module.exports=a():t.Query=a(window.Zepto||window.jQuery||$)}(this,function(t){var a={getQuery:function(t,a,e){new RegExp("(^|&|#)"+t+"=([^&]*)(&|$|#)","i");e=e||window;var r,s,n=e.location.href,l="";if(r=n.split("#"==a?"#":"?"),s=1==r.length?"":r[1],""!=s){gg=s.split(/&|#/);var u=gg.length;for(str=arguments[0]+"=",i=0;i<u;i++)if(0==gg[i].indexOf(str)){l=gg[i].replace(str,"");break}}return decodeURI(l)},getForm:function(a){var e={},r={};t(a).find("*[name]").each(function(a,i){var s,n=t(i).attr("name"),l=t.trim(t(i).val()),u=[];if(""!=n&&!t(i).hasClass("getvalued")){if("money"==t(i).data("type")&&(l=l.replace(/\,/gi,"")),"radio"==t(i).attr("type")){var h=null;t("input[name='"+n+"']:radio").each(function(){t(this).is(":checked")&&(h=t.trim(t(this).val()))}),l=h?h:""}if("checkbox"==t(i).attr("type")){var h=[];t("input[name='"+n+"']:checkbox").each(function(){t(this).is(":checked")&&h.push(t.trim(t(this).val()))}),l=h.length?h.join(","):""}if(t(i).attr("listvalue")&&(e[t(i).attr("listvalue")]||(e[t(i).attr("listvalue")]=[],t("input[listvalue='"+t(i).attr("listvalue")+"']").each(function(){if(""!=t(this).val()){var a=t(this).attr("name"),r={};if(r[a]="json"==t(this).data("type")?JSON.parse(t(this).val()):t.trim(t(this).val()),t(this).attr("paramquest")){var s=JSON.parse(t(this).attr("paramquest"));r=t.extend(r,s)}e[t(i).attr("listvalue")].push(r),t(this).addClass("getvalued")}}))),t(i).attr("arrayvalue")&&(e[t(i).attr("arrayvalue")]||(e[t(i).attr("arrayvalue")]=[],t("input[arrayvalue='"+t(i).attr("arrayvalue")+"']").each(function(){if(""!=t(this).val()){var a={};if(a="json"==t(this).data("type")?JSON.parse(t(this).val()):t.trim(t(this).val()),t(this).attr("paramquest")){var r=JSON.parse(t(this).attr("paramquest"));a=t.extend(a,r)}e[t(i).attr("arrayvalue")].push(a)}}))),""!=n&&!t(i).hasClass("getvalued"))if(n.match(/\./)){if(u=n.split("."),s=u[0],3==u.length)r[u[1]]=r[u[1]]||{},r[u[1]][u[2]]=l;else if("json"==t(i).data("type")){if(r[u[1]]=JSON.parse(l),t(i).attr("paramquest")){var o=JSON.parse(t(i).attr("paramquest"));r[u[1]]=t.extend(r[u[1]],o)}}else r[u[1]]=l;e[s]=e[s]?t.extend({},e[s],r):r}else e[n]=l}});var i={};for(var s in e){var n=e[s];i[s]="object"==typeof n?JSON.stringify(n):e[s]}return t(".getvalued").removeClass("getvalued"),i},setHash:function(a){var e="";a=t.extend(this.getHash(),a);var r=[];for(var i in a)""!=a[i]&&r.push(i+"="+encodeURIComponent(a[i]));return e+=r.join("&"),location.hash=e,this},getHash:function(t){if("string"==typeof t)return this.getQuery(t,"#");var a={},e=location.hash;if(e.length>0){e=e.substr(1);for(var r=e.split("&"),i=0,s=r.length;s>i;i++){var n=r[i].split("=");n.length>0&&(a[n[0]]=decodeURI(n[1])||"")}}return a}};return a});