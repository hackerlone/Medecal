!function(t,i){"function"==typeof define&&define.amd?define(["$","query"],i):"object"==typeof exports?module.exports=i():t.Paging=i(window.Zepto||window.jQuery||$,Query)}(this,function(t,i){function s(){var t=Math.random().toString().replace(".","");this.id="Paging_"+t}return t.fn.Paging=function(i){var e=[];return t(this).each(function(){var a=t.extend({target:t(this)},i),n=new s;n.init(a),e.push(n)}),e},s.prototype={init:function(i){this.settings=t.extend({callback:null,pagesize:10,current:1,prevTpl:"上一页",nextTpl:"下一页",firstTpl:"首页",lastTpl:"末页",ellipseTpl:"...",toolbar:!1,hash:!0,pageSizeList:[5,10,15,20]},i),this.target=t(this.settings.target),this.container=t('<div id="'+this.id+'" class="ui-paging-container"/>'),this.target.append(this.container),this.render(this.settings),this.format(),this.bindEvent()},render:function(t){this.count=t.count||this.settings.count,this.pagesize=t.pagesize||this.settings.pagesize,this.current=t.current||this.settings.current,this.pagecount=Math.ceil(this.count/this.pagesize),this.format()},bindEvent:function(){var i=this;this.container.on("click","li.js-page-action,li.ui-pager",function(s){return t(this).hasClass("ui-pager-disabled")||t(this).hasClass("focus")?!1:(t(this).hasClass("js-page-action")?(t(this).hasClass("js-page-first")&&(i.current=1),t(this).hasClass("js-page-prev")&&(i.current=Math.max(1,i.current-1)),t(this).hasClass("js-page-next")&&(i.current=Math.min(i.pagecount,i.current+1)),t(this).hasClass("js-page-last")&&(i.current=i.pagecount)):t(this).data("page")&&(i.current=parseInt(t(this).data("page"))),void i.go())})},go:function(t){var s=this;this.current=t||this.current,this.current=Math.max(1,s.current),this.current=Math.min(this.current,s.pagecount),this.format(),this.settings.hash&&i.setHash({page:this.current}),this.settings.callback&&this.settings.callback(this.current,this.pagesize,this.pagecount)},changePagesize:function(t){this.render({pagesize:t})},format:function(){var i="<ul>";if(i+='<li class="js-page-first js-page-action ui-pager" >'+this.settings.firstTpl+"</li>",i+='<li class="js-page-prev js-page-action ui-pager">'+this.settings.prevTpl+"</li>",this.pagecount>6){if(i+='<li data-page="1" class="ui-pager">1</li>',this.current<=2)i+='<li data-page="2" class="ui-pager">2</li>',i+='<li data-page="3" class="ui-pager">3</li>',i+='<li class="ui-paging-ellipse">'+this.settings.ellipseTpl+"</li>";else if(this.current>2&&this.current<=this.pagecount-2)i+="<li>"+this.settings.ellipseTpl+"</li>",i+='<li data-page="'+(this.current-1)+'" class="ui-pager">'+(this.current-1)+"</li>",i+='<li data-page="'+this.current+'" class="ui-pager">'+this.current+"</li>",i+='<li data-page="'+(this.current+1)+'" class="ui-pager">'+(this.current+1)+"</li>",i+='<li class="ui-paging-ellipse" class="ui-pager">'+this.settings.ellipseTpl+"</li>";else{i+='<li class="ui-paging-ellipse" >'+this.settings.ellipseTpl+"</li>";for(var s=this.pagecount-2;s<this.pagecount;s++)i+='<li data-page="'+s+'" class="ui-pager">'+s+"</li>"}i+='<li data-page="'+this.pagecount+'" class="ui-pager">'+this.pagecount+"</li>"}else for(var s=1;s<=this.pagecount;s++)i+='<li data-page="'+s+'" class="ui-pager">'+s+"</li>";i+='<li class="js-page-next js-page-action ui-pager">'+this.settings.nextTpl+"</li>",i+='<li class="js-page-last js-page-action ui-pager">'+this.settings.lastTpl+"</li>",i+="</ul>",this.container.html(i),1==this.current&&(t(".js-page-prev",this.container).addClass("ui-pager-disabled"),t(".js-page-first",this.container).addClass("ui-pager-disabled")),this.current==this.pagecount&&(t(".js-page-next",this.container).addClass("ui-pager-disabled"),t(".js-page-last",this.container).addClass("ui-pager-disabled")),this.container.find('li[data-page="'+this.current+'"]').addClass("focus").siblings().removeClass("focus"),this.settings.toolbar&&this.bindToolbar()},bindToolbar:function(){for(var i=this,s=t('<li class="ui-paging-toolbar"><select class="ui-select-pagesize"></select><input type="text" class="ui-paging-count"/><a href="javascript:void(0)">跳转</a></li>'),e=t(".ui-select-pagesize",s),a="",n=0,r=this.settings.pageSizeList.length;r>n;n++)a+='<option value="'+this.settings.pageSizeList[n]+'">'+this.settings.pageSizeList[n]+"条/页</option>";e.html(a),e.val(this.pagesize),t("input",s).val(this.current),t("input",s).click(function(){t(this).select()}).keydown(function(s){if(13==s.keyCode){var e=parseInt(t(this).val())||1;i.go(e)}}),t("a",s).click(function(){var s=parseInt(t(this).prev().val())||1;i.go(s)}),e.change(function(){i.changePagesize(t(this).val())}),this.container.children("ul").append(s)}},s});